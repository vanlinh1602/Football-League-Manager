"use strict";(self.webpackChunkfootball_league_manager=self.webpackChunkfootball_league_manager||[]).push([[910],{5274:(e,t,a)=>{a.d(t,{h:()=>s,P:()=>l.Z});var i=a(9609),n=a(184);const s=e=>{let{content:t}=e;return(0,n.jsx)(i.Z,{style:{backgroundColor:"white",marginBottom:5,height:64},children:t})};var l=a(8852)},3757:(e,t,a)=>{a.d(t,{s:()=>m});var i=a(9949),n=a(4203),s=a(3085),l=a(763),d=a.n(l),c=a(7780),r=a(2999),o=a(8996);function*h(){try{const e=yield r.k.post("api/getLeagues",{});if("ok"===e.kind)if(e.data.length){const t=d().keyBy(e.data,"id");yield(0,c.gz)(n.Nw.fetchLeagues(t))}else yield(0,c.gz)(n.Nw.fetchLeagues({}));else yield(0,c.gz)(n.Nw.fetchLeagues({})),s.Z.error({message:"L\u1ed7i tra c\u1ee9u",description:(0,o.Z)(e)})}catch(e){yield(0,c.gz)(n.Nw.fetchLeagues({})),s.Z.error({message:"L\u1ed7i tra c\u1ee9u",description:(0,o.Z)(e)})}}function*u(e){try{const t=e.payload,a=yield r.k.post("api/updateLeague",{data:t});"ok"===a.kind?yield(0,c.gz)(n.Nw.fetchLeagues({[t.id]:t})):(yield(0,c.gz)(n.Nw.fetchLeagues({})),s.Z.error({message:"L\u1ed7i c\u1eadp nh\u1eadt",description:(0,o.Z)(a)}))}catch(t){yield(0,c.gz)(n.Nw.fetchLeagues({})),s.Z.error({message:"L\u1ed7i c\u1eadp nh\u1eadp",description:(0,o.Z)(t)})}}function*g(){yield(0,c.$6)([(0,c.ib)(n.Nw.getLeagues.type,h),(0,c.ib)(n.Nw.updateLeague.type,u)])}const m=()=>((0,i.v)({key:n.Jy,reducer:n.I6}),(0,i.h)({key:n.Jy,saga:g}),{actions:n.Nw})},4203:(e,t,a)=>{a.d(t,{E3:()=>n,I6:()=>c,Jy:()=>d,Nw:()=>l});var i=a(3407);const n={handling:!1},s=(0,i.o)({name:"leagueStore",initialState:n,reducers:{fetchLeagues(e,t){e.handling=!1,e.data={...e.data,...t.payload}},getLeagues(e){e.handling=!0},updateLeague(e,t){e.handling=!0}}}),{actions:l,name:d,reducer:c}=s},6452:(e,t,a)=>{a.d(t,{L:()=>l,N:()=>d});var i=a(6916),n=a(4203);const s=e=>(null===e||void 0===e?void 0:e.leagueStore)||n.E3,l=(0,i.P1)([s],(e=>e.handling)),d=(0,i.P1)([s],(e=>e.data))},9324:(e,t,a)=>{a.d(t,{V:()=>v});var i=a(9949),n=a(4879),s=a(3085),l=a(763),d=a.n(l),c=a(7780),r=a(2999),o=a(8996),h=a(4326);function*u(e){try{const t=e.payload,a=yield r.k.post("api/getMatchs",{league:t});if("ok"===a.kind)if(a.data.length){const e=d().keyBy(a.data,"id");yield(0,c.gz)(n.Nw.fetchMatchs(e))}else yield(0,c.gz)(n.Nw.fetchMatchs({}));else yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i tra c\u1ee9u",description:(0,o.Z)(a)})}catch(t){yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i tra c\u1ee9u",description:(0,o.Z)(t)})}}function*g(e){try{const t=e.payload,a=yield r.k.post("api/updateMatch",{data:t});"ok"===a.kind?yield(0,c.gz)(n.Nw.fetchMatchs({[t.id]:t})):(yield(0,c.gz)(n.Nw.fetchMatchs({})),s.Z.error({message:"L\u1ed7i c\u1eadp nh\u1eadt",description:(0,o.Z)(a)}))}catch(t){yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i c\u1eadp nh\u1eadp",description:(0,o.Z)(t)})}}function*m(e){try{const t=e.payload,a=yield r.k.post("api/getEvents",{match:t});if("ok"===a.kind)if(a.data.length){const e=d().keyBy(a.data,"id");yield(0,c.gz)(n.Nw.fetchEvents({match:t,data:e}))}else yield(0,c.gz)(n.Nw.fetchMatchs({}));else yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i tra c\u1ee9u",description:(0,o.Z)(a)})}catch(t){yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i tra c\u1ee9u",description:(0,o.Z)(t)})}}function*y(e){try{const t=e.payload,a=yield r.k.post("api/updateEvent",{data:t});if("ok"===a.kind){if(yield(0,c.gz)(n.Nw.fetchEvents({match:t.match,data:{[t.id]:t}})),"goals"===t.name){const e=yield(0,c.Ys)((e=>(0,h.P9)(e,t.match))),a=d().cloneDeep(e);if(t.detail.team===e.teamA){const t=d().get(e,["mathResult","teamA"],0);d().set(a,["mathResult","teamA"],t+1)}else{const t=d().get(e,["mathResult","teamB"],0);d().set(a,["mathResult","teamB"],t+1)}yield(0,c.gz)(n.Nw.updateMatch(a))}}else yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i c\u1eadp nh\u1eadt",description:(0,o.Z)(a)})}catch(t){yield(0,c.gz)(n.Nw.fetchMatchs()),s.Z.error({message:"L\u1ed7i c\u1eadp nh\u1eadp",description:(0,o.Z)(t)})}}function*p(){yield(0,c.$6)([(0,c.ib)(n.Nw.getMatchs.type,u),(0,c.ib)(n.Nw.getEvents.type,m),(0,c.ib)(n.Nw.updateMatch.type,g),(0,c.ib)(n.Nw.updateEvent.type,y)])}const v=()=>((0,i.v)({key:n.Jy,reducer:n.I6}),(0,i.h)({key:n.Jy,saga:p}),{actions:n.Nw})},4879:(e,t,a)=>{a.d(t,{E3:()=>n,I6:()=>c,Jy:()=>d,Nw:()=>l});var i=a(3407);const n={handling:!1},s=(0,i.o)({name:"matchStore",initialState:n,reducers:{fetchMatchs(e,t){e.handling=!1,t.payload&&(e.matches={...e.matches,...t.payload})},fetchEvents(e,t){if(e.handling=!1,t.payload){var a;const{match:i,data:n}=t.payload;e.events={...e.events,[i]:{...null===(a=e.events)||void 0===a?void 0:a[i],...n}}}},getMatchs(e,t){e.handling=!0},getEvents(e,t){e.handling=!0},updateMatch(e,t){e.handling=!0},updateEvent(e,t){e.handling=!0}}}),{actions:l,name:d,reducer:c}=s},4326:(e,t,a)=>{a.d(t,{P9:()=>h,oi:()=>o,om:()=>d,wj:()=>u});var i=a(6916),n=a(4879);const s=e=>(null===e||void 0===e?void 0:e.matchStore)||n.E3,l=(e,t)=>t,d=(0,i.P1)([s],(e=>e.handling)),c=(0,i.P1)([s],(e=>e.matches)),r=(0,i.P1)([s],(e=>e.events)),o=(0,i.P1)([c,l],((e,t)=>Object.values(null!==e&&void 0!==e?e:{}).filter((e=>e.league===t)))),h=(0,i.P1)([c,l],((e,t)=>null===e||void 0===e?void 0:e[t])),u=(0,i.P1)([r,l],((e,t)=>null===e||void 0===e?void 0:e[t]))},8216:(e,t,a)=>{a.d(t,{b:()=>d,w:()=>l});var i=a(6916),n=a(379);const s=e=>(null===e||void 0===e?void 0:e.teamStore)||n.E3,l=(0,i.P1)([s],(e=>e.handling)),d=(0,i.P1)([s],(e=>e.data))},4910:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var i=a(6106),n=a(914),s=a(5637),l=a(3734),d=a(7309),c=a(3085),r=a(5671),o=a(5274),h=a(3757),u=a(6452),g=a(792),m=a(7747),y=a(2910),p=a(3020),v=a(8216),Z=a(2426),f=a.n(Z),j=a(9434),x=a(7689),w=a(184);const k=e=>{var t;let{info:a,handleEdit:l}=e;const d=(0,x.s0)(),c=null!==(t=(0,j.v9)(v.b))&&void 0!==t?t:{};return(0,w.jsx)(y.Z,{style:{width:300,margin:"20px",borderRadius:"20px",overflow:"hidden"},bodyStyle:{borderRadius:12},actions:[(0,w.jsx)(p.Z,{content:"Xem tr\u1eadn \u0111\u1ea5u",children:(0,w.jsx)(g.Z,{onClick:()=>d("/matches/".concat(a.league,"/").concat(a.id,"/events"))},"view")}),(0,w.jsxs)(p.Z,{content:"Ch\u1ec9nh s\u1eeda th\xf4ng tin",children:[(0,w.jsx)(m.Z,{onClick:l},"edit"),","]})],children:(0,w.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,w.jsx)(i.Z,{align:"middle",justify:"center",children:(0,w.jsx)(s.Z,{children:f()(a.date).format("H:mm - DD/MM/YYYY")})}),(0,w.jsx)(i.Z,{align:"middle",justify:"center",children:(0,w.jsx)(s.Z.Title,{level:5,children:a.round})}),(0,w.jsxs)(i.Z,{justify:"space-between",align:"middle",gutter:12,children:[(0,w.jsxs)(n.Z,{span:11,children:[(0,w.jsx)("img",{src:c[a.teamA].logo,alt:"",style:{width:80,borderRadius:48}}),(0,w.jsx)(s.Z.Title,{level:5,style:{marginTop:10},children:c[a.teamA].name})]}),(0,w.jsx)(n.Z,{span:2,children:(0,w.jsx)("b",{children:"VS"})}),(0,w.jsxs)(n.Z,{span:11,children:[(0,w.jsx)("img",{src:c[a.teamB].logo,alt:"",style:{width:70,borderRadius:48}}),(0,w.jsx)(s.Z.Title,{level:5,style:{marginTop:10},children:c[a.teamB].name})]})]})]})})};var b=a(2932),N=a(6784),L=a(4322),M=a(222),z=a(9324),E=a(2791),C=a(946);const P=e=>{let{info:t,onClose:a}=e;const s=(0,j.I0)(),{actions:c}=(0,z.V)(),r=(0,j.v9)(v.b),[o]=b.Z.useForm(),h=(0,E.useMemo)((()=>Object.values(null!==r&&void 0!==r?r:{}).map((e=>{let{id:t,name:a}=e;return{label:a,value:t}}))),[r]);return(0,w.jsx)(N.Z,{width:700,open:!0,title:"".concat(t.id?"S\u1eeda th\xf4ng tin":"Th\xeam"," gi\u1ea3i \u0111\u1ea5u"),onCancel:a,footer:[(0,w.jsx)(d.Z,{type:"primary",onClick:async()=>{try{const e=await o.validateFields(),i={...t,...e,date:f()(e.date).valueOf()};i.id||(i.id=(0,C.y)()),s(c.updateMatch(i)),a()}catch{}},children:"L\u01b0u"})],children:(0,w.jsxs)(b.Z,{form:o,layout:"vertical",initialValues:{...t,date:t.date?f()(t.date):""},children:[(0,w.jsxs)(i.Z,{gutter:10,children:[(0,w.jsx)(n.Z,{span:12,children:(0,w.jsx)(b.Z.Item,{name:"teamA",label:"\u0110\u1ed9i 1",rules:[{required:!0}],children:(0,w.jsx)(l.Z,{options:h})})}),(0,w.jsx)(n.Z,{span:12,children:(0,w.jsx)(b.Z.Item,{name:"teamB",label:"\u0110\u1ed9i 2",rules:[{required:!0}],children:(0,w.jsx)(l.Z,{options:h})})})]}),(0,w.jsx)(b.Z.Item,{name:"round",label:"L\u01b0\u1ee3t \u0111\u1ea5u",rules:[{required:!0}],children:(0,w.jsx)(L.Z,{})}),(0,w.jsx)(b.Z.Item,{name:"place",label:"\u0110\u1ecba \u0111i\u1ec3m",rules:[{required:!0}],children:(0,w.jsx)(L.Z,{})}),(0,w.jsx)(b.Z.Item,{name:"date",label:"Ng\xe0y thi \u0111\u1ea5u",rules:[{required:!0}],children:(0,w.jsx)(M.Z,{style:{width:"100%"},format:"H:mm - DD/MM/YYYY",showTime:{format:"HH:mm"}})}),(0,w.jsx)(b.Z.Item,{name:"video",label:"Youtube video",children:(0,w.jsx)(L.Z,{})})]})})};var I=a(4326);const S=()=>{const{league:e}=(0,x.UO)(),t=(0,j.I0)(),{actions:a}=(0,z.V)(),{actions:g}=(0,h.s)(),[m,y]=(0,E.useState)(e||""),[p,v]=(0,E.useState)(),Z=(0,j.v9)(I.om),f=(0,j.v9)(u.L),b=(0,j.v9)((e=>(0,I.oi)(e,m))),N=(0,j.v9)(u.N);return(0,E.useEffect)((()=>{m&&!b&&t(a.getMatchs(m)),N||t(g.getLeagues())}),[]),(0,w.jsxs)("div",{children:[Z||f?(0,w.jsx)(o.P,{}):null,p?(0,w.jsx)(P,{info:p,onClose:()=>v(void 0)}):null,(0,w.jsx)(o.h,{content:(0,w.jsxs)(i.Z,{align:"middle",justify:"space-between",children:[(0,w.jsx)(n.Z,{children:(0,w.jsx)(s.Z.Title,{level:4,children:"Tr\u1eadn \u0111\u1ea5u"})}),(0,w.jsx)(n.Z,{children:(0,w.jsxs)(i.Z,{gutter:10,align:"middle",children:[(0,w.jsx)(n.Z,{children:"Ch\u1ecdn gi\u1ea3i \u0111\u1ea5u"}),(0,w.jsx)(n.Z,{children:(0,w.jsx)(l.Z,{value:m,options:Object.values(null!==N&&void 0!==N?N:{}).map((e=>({label:e.name,value:e.id}))),style:{width:150},onChange:e=>y(e)})}),(0,w.jsx)(n.Z,{children:(0,w.jsx)(d.Z,{type:"primary",onClick:()=>{t(a.getMatchs(m))},children:"T\xecm ki\u1ebfm"})}),(0,w.jsx)(n.Z,{style:{float:"right",position:"relative"},children:(0,w.jsx)(d.Z,{type:"text",style:{backgroundColor:"#82c91e",color:"white"},onClick:()=>{m?v({league:m}):c.Z.warning({message:"Vui l\xf2ng ch\u1ecdn gi\u1ea3i \u0111\u1ea5u"})},children:"Th\xeam tr\u1eadn \u0111\u1ea5u"})})]})})]})}),(0,w.jsx)(r.Z,{style:{overflowY:"scroll",height:window.innerHeight-100},children:(0,w.jsx)(i.Z,{children:b.map((e=>(0,w.jsx)(n.Z,{span:6,children:(0,w.jsx)(k,{info:e,handleEdit:()=>v(e)})})))})})]})}},946:(e,t,a)=>{a.d(t,{y:()=>n});a(763),a(2426);var i=a(5984);const n=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const d="".concat(null!==(e=l.prefix)&&void 0!==e?e:"").concat((0,i.x0)(s)).concat(null!==(t=l.suffix)&&void 0!==t?t:"");return a.includes(d)?n(a,s,l):d}},792:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(7462),n=a(2791),s=a(3785),l=a(2035),d=function(e,t){return n.createElement(l.Z,(0,i.Z)({},e,{ref:t,icon:s.Z}))};const c=n.forwardRef(d)}}]);
//# sourceMappingURL=910.75e69023.chunk.js.map